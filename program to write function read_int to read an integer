/*
Name: Nishanth R
Date: 29-11-2021
Description: program to write function read_int to read an integer
Input: Enter a number:15
Output: The number is:15
 */
#include <stdio_ext.h>

int readnum(int*num)
{
    int c;
    int var = 0;
    int dec;
    int sign = 0;
    int flag=0;

    while ( (c = getchar()) != '\n')  // getting inputs till user press enter
    {
        if ( ( c >= '0' && c <= '9' ) || ( c == '-' ) || ( c== '+' ) ) //condition for first char is  0-9 or - or +
            flag = 1;

                    // condition for char other than 0-9 or - or +
        if ( flag == 0 )
        {
            *num = var;
            return 0;
        }
        dec = c - '0';  //to get char
        if ( dec >= 0 && dec <= 9) //condition for dec is between 0-9
        {
            var = var * 10;
            if ( sign == 1 || var < 0)
                var = var - dec;          //for - values
            else
                var = var + dec;         //for + values
        }
        else if (c == '-') //condition for  char is -
        {
            sign = 1;
        }
        else if (c == '+') //condition for char is +
        {
            sign = 0;
        }

    }
    *num=var;
}

int main()
{
    char choice;
    do
    {
        int num;
        printf("Enter a number:");
        readnum(&num); //function call
        printf("The number is :%d\n", num);
        printf("Do you want to continue?(y/Y):");
        __fpurge(stdin); //to clear the buffer
        scanf("\n%c", &choice);
        getchar(); //to get the remaining extra char
    }   
    while (choice == 'y' || choice == 'Y');
    return 0;
}
