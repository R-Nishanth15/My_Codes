/*
Name : Nishanth R
Date : 08.12.2021
Description : Implement getword, atoi, itoa functions
Input :
1.get word
2.atoi
3.itoa
Enter the choice:1
Output: Enter string:hello
you entered  hello and length is : 5
*/


#include <stdio.h>
int get_word(char*str)
{
    int i=0;
    int count=0;
    while(str[i]!='\0') // running loop till the string ends
    {
        if (str[i] ==' ') // condition for one word
        {
            str[count]='\0'; //end with \0 to make it string
            return count;
        }
        count++;
        i++;
    }
    return count;
}

int ascii_to_integer(char*str) // function for ascii to int
{
    int temp=0,flag=0,i=0,var=0,dec=0,sign=0;
    while ( str[i] != '\0')
    {  
        if((str[i]>='0' && str[i]<='9')||(str[i]=='-')||(str[i]=='+')) //condition for 0-9,-,+
            flag=1;
        if (flag==0) //condition for alphatets and chars other than -,+
        {
            str[i]=var;
            return 0;
        }
        dec = str[i] - '0'; // to get the decimal value of ascii char
        if ( dec >= 0 && dec <= 9)
        {
            var *= 10;
            if ( sign == 1 || var < 0 )
            {
                var = var - dec;    //for -ve
            }
            else
            {
                var = var + dec;   //for +ve

            }
        }
        else if (str[i] == '-')
        {
            sign = 1;
        }
        else if (str[i] == '+')
        {
            sign = 0;
        }
        temp = str[i];
        i++;
    }
    return var;
}

int integer_to_ascii( int num,char *str) // function for int to ascii
{
    char temp [20];
    int i= 0;
    while ( num > 0)  // for postive
    {
        int rem = num % 10;
        num = num / 10;  
        temp[i] = rem + '0';
        i++;
    }   
    int j=0;
    while( temp[j] != '\0' )
    {
        str[j] = temp[--i];//store in original array
        j++;
    }   
    str[j]='\0'; //end with null to make is string
    return j;
}

int main()
{
    char choice;
    do
    {
        int count,select,value,num;
        char str[20];
        printf("1.get word\n2.atoi\n3.itoa\nEnter the choice:");
        scanf("%d",&select);
        //switch case to select the option
        switch(select)
        {
            case 1:printf("Enter string:");
                   scanf(" %[^\n]",str); //selective scan to take input string
                   count=get_word(str);// function call
                   getchar();
                   printf("you entered  %s and length is : %d\n", str, count);
                   break;
            case 2:scanf(" %[^\n]",str); //selective scan to take input string
                   value=ascii_to_integer(str); // function call
                   printf("you entered  : %d\n",value);
                   break;
            case 3:
                   printf("enter integer:");
                   scanf("%d",&num);
                   integer_to_ascii(num,str); // function call
                   printf("%s\n",str);
                   break;
            default:printf("invalid option");
        }
        printf("Do you want to continue? : (Y/y)");
        scanf("\n%c",&choice);
    }
    while(choice == 'Y' || choice == 'y');
    return 0;
}
